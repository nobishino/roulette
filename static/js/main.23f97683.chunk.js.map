{"version":3,"sources":["App.jsx","index.js"],"names":["InputBox","props","id","className","onChange","event","items","text","split","filter","item","match","parseInput","target","value","Control","onClick","onStart","onStop","RouletteItems","selectClass","index","selected","finished","itemList","map","itemLabel","key","select","Item","Display","AppF","useState","setItems","setSelected","intervalId","setIntervalId","countdown","setCountdown","rolling","setRolling","rollNext","current","next","Math","floor","random","length","console","log","clearIntervalId","clearInterval","setInterval","startCount","cnt","nextCnt","ReactDOM","render","App","document","getElementById"],"mappings":"8JAEMA,EAAW,SAAAC,GAWb,OACI,yBAAKC,GAAG,WAAWC,UAAU,aACzB,wDACA,8BAAUD,GAAG,YAAYE,SARhB,SAAAC,GACb,IACMC,EAPS,SAAAC,GACf,OAAOA,EACFC,MAAM,cACNC,QAAO,SAAAC,GAAI,OAAKA,EAAKC,MAAM,YAIlBC,CADDP,EAAMQ,OAAOC,OAE1Bb,EAAMG,SAASE,QASjBS,EAAU,SAAAd,GACZ,OACI,yBAAKC,GAAG,UAAUC,UAAU,aACxB,4BAAQa,QAASf,EAAMgB,SAAvB,SACA,4BAAQD,QAASf,EAAMiB,QAAvB,UAKNC,EAAgB,SAAAlB,GAClB,IAAMmB,EAAc,SAAAC,GAChB,OAAIA,IAAUpB,EAAMqB,SACT,eACArB,EAAMsB,SACN,cAEA,iBAMf,OAHctB,EAAMuB,SAASC,KAAI,SAACC,EAAWL,GACzC,OAAO,kBAAC,EAAD,CAAMM,IAAKN,EAAQ,IAAMK,EAAWA,UAAWA,EAAWE,OAAQR,EAAYC,SAKvFQ,EAAO,SAAA5B,GACT,OAAO,yBAAKE,UAAS,eAAUF,EAAM2B,SAAW3B,EAAMyB,YAGpDI,EAAU,SAAA7B,GACZ,IAAMuB,EAAWvB,EAAMuB,UAAY,GACnC,OACI,yBAAKrB,UAAU,uBACX,kBAAC,EAAD,CAAeqB,SAAUA,EAAUF,SAAUrB,EAAMqB,SAAUC,SAAUtB,EAAMsB,aA8E1EQ,EArEF,WAAO,IAAD,EACWC,mBAAS,IADpB,mBACR1B,EADQ,KACD2B,EADC,OAEiBD,oBAAU,GAF3B,mBAERV,EAFQ,KAEEY,EAFF,OAGqBF,mBAAS,MAH9B,mBAGRG,EAHQ,KAGIC,EAHJ,OAImBJ,oBAAU,GAJ7B,mBAIRK,EAJQ,KAIGC,EAJH,OAKeN,oBAAS,GALxB,mBAKRO,EALQ,KAKCC,EALD,KAYTC,EAAW,SAAAC,GACb,IACMC,GAAQD,GADDE,KAAKC,MAAMD,KAAKE,UAAYxC,EAAMyC,OAAS,IAAM,IAC9BzC,EAAMyC,OAEtC,OADAC,QAAQC,IAAR,0BAA+BN,EAA/B,aAAwCrC,EAAMqC,GAA9C,MACOA,GAELO,EAAkB,SAAAhD,GAEpB,OADAiD,cAAcjD,GACP,MAyCX,OACI,6BACI,kBAAC,EAAD,CAAUE,SAxDW,SAAAE,GACzB2B,EAAS3B,GACT4B,GAAa,GACbI,GAAc,MAsDV,kBAAC,EAAD,CAASrB,QA1CD,WACO,OAAfkB,EAIiB,IAAjB7B,EAAMyC,QAIVP,GAAW,GACXJ,EAAcgB,aAAY,WACtBlB,EAAYO,KApCQ,OA+BpBO,QAAQC,IAAR,mBAJAD,QAAQC,IAAR,kCAAuCd,KAwCZjB,OA5BpB,WAEX,GADA8B,QAAQC,IAAI,mBACPV,EAAL,CAIA,IAAMc,EAAaT,KAAKC,MAAMD,KAAKE,SAAWxC,EAAMyC,QAAUzC,EAAMyC,OACpET,EAAae,EAAa,EAAIA,EAAa,GAC3CjB,GAAc,SAAAD,GAEV,OADAgB,cAAchB,GACPiB,aAAY,WACfd,GAAa,SAAAgB,GACT,GAAY,IAARA,EAGA,OAFAlB,EAAcc,GACdV,GAAW,GACJ,EAEX,IAAMe,EAAUD,EAAM,EAGtB,OAFAN,QAAQC,IAAR,kBAAuBM,IACvBrB,EAAYO,GACLc,OA1DI,aAyCnBP,QAAQC,IAAR,+BA0BA,kBAAC,EAAD,CAASzB,SAAUlB,EAAOgB,SAAUA,EAAUC,SA3Df,IAAdc,IAAoBE,MC/DjDiB,IAASC,OACP,kBAACC,EAAD,MACAC,SAASC,eAAe,U","file":"static/js/main.23f97683.chunk.js","sourcesContent":["import React, { useState } from 'react';\n\nconst InputBox = props => {\n    const parseInput = text => {\n        return text\n            .split(/\\r\\n|\\r|\\n/) //改行コードで分割\n            .filter(item => !item.match(/^\\s*$/)); //空行削除\n    }\n    const onChange = event => {\n        const text = event.target.value;\n        const items = parseInput(text)\n        props.onChange(items);\n    }\n    return (\n        <div id=\"inputbox\" className=\"component\">\n            <h2>List of candidate items:</h2>\n            <textarea id=\"inputarea\" onChange={onChange}></textarea>\n        </div>\n    )\n}\nconst Control = props => {\n    return (\n        <div id=\"control\" className=\"component\">\n            <button onClick={props.onStart}>Start</button>\n            <button onClick={props.onStop}>Stop</button>\n        </div>\n    )\n}\n\nconst RouletteItems = props => {\n    const selectClass = index => {\n        if (index !== props.selected) {\n            return \"item-default\";\n        } else if (props.finished) {\n            return \"item-winner\";\n        } else {\n            return \"item-selected\";\n        }\n    }\n    const items = props.itemList.map((itemLabel, index) => {\n        return <Item key={index + \"-\" + itemLabel} itemLabel={itemLabel} select={selectClass(index)} />\n    });\n    return items;\n}\n\nconst Item = props => {\n    return <div className={`item ${props.select}`}>{props.itemLabel}</div>\n}\n\nconst Display = props => {\n    const itemList = props.itemList || [];\n    return (\n        <div className=\"container component\">\n            <RouletteItems itemList={itemList} selected={props.selected} finished={props.finished} />\n        </div>\n    )\n}\n\n//速度調整用\nconst beforeStopButtonMillSec = 100;\nconst afterStopButtonMullSec = 500;\n\nconst AppF = () => {\n    const [items, setItems] = useState([]);\n    const [selected, setSelected] = useState(-1);\n    const [intervalId, setIntervalId] = useState(null);\n    const [countdown, setCountdown] = useState(-1);\n    const [rolling, setRolling] = useState(false);\n    const isFinished = () => countdown === 0 && !rolling;\n    const handleTextareaChange = items => {\n        setItems(items);\n        setSelected(-1);\n        setCountdown(-1);\n    };\n    const rollNext = current => {\n        const diff = Math.floor(Math.random() * (items.length - 1)) + 1; // diff <- [1, size - 1] \n        const next = (current + diff) % items.length\n        console.log(`Selected item: (${next}, ${items[next]})`);\n        return next\n    };\n    const clearIntervalId = id => {\n        clearInterval(id);\n        return null;\n    };\n    const onStart = () => {\n        if (intervalId !== null) {\n            console.log(`intervalId is not null: ${intervalId}`);\n            return;\n        }\n        if (items.length === 0) {\n            console.log(`items are empty`);\n            return;\n        }\n        setRolling(true);\n        setIntervalId(setInterval(() => {\n            setSelected(rollNext);\n        }, beforeStopButtonMillSec));\n    };\n    const onStop = () => {\n        console.log(\"onStop() called\");\n        if (!rolling) {\n            console.log(`Roulette is not rolling.`);\n            return;\n        }\n        const startCount = Math.floor(Math.random() * items.length) + items.length;\n        setCountdown(startCount > 0 ? startCount : 1);\n        setIntervalId(intervalId => {\n            clearInterval(intervalId);\n            return setInterval(() => {\n                setCountdown(cnt => {\n                    if (cnt === 0) {\n                        setIntervalId(clearIntervalId);\n                        setRolling(false);\n                        return 0;\n                    }\n                    const nextCnt = cnt - 1;\n                    console.log(`count = ${nextCnt}`);\n                    setSelected(rollNext);\n                    return nextCnt;\n                });\n            }, afterStopButtonMullSec);\n        });\n    };\n    return (\n        <div>\n            <InputBox onChange={handleTextareaChange} />\n            <Control onStart={onStart} onStop={onStop} />\n            <Display itemList={items} selected={selected} finished={isFinished()} />\n        </div>\n    );\n}\nexport default AppF;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App.jsx';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);"],"sourceRoot":""}